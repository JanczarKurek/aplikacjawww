<div class="card mb-3 w-100" id="{{ workshop.name }}" data-register="{% url 'register_to_workshop' workshop.year.pk workshop.name %}" data-unregister="{% url 'unregister_from_workshop' workshop.year.pk workshop.name %}">
  {% if not no_workshop_card_header %}
  <div class="card-header">
    <div class="row">
      <div class="col-12 col-lg-8">
        <h4 class="m-0">
        {% if workshop.page_content_is_public %}<a href="{% url 'workshop_page' workshop.year.pk workshop.name %}">{% endif %}
        {% if workshop.status == 'X' %}<del>{% endif %}
        <b>{{ workshop.title }}</b>
        {% if workshop.status == 'X' %}</del>{% endif %}
        {% if workshop.page_content_is_public %}</a>{% endif %}
        {% if workshop.status == 'X' %}&nbsp;&nbsp;<span class="text-danger">(odwołane)</span>{% endif %}
        {% for category in workshop.category.all %}
          <span class="badge badge-secondary">{{ category.name }}</span>
        {% endfor %}
        </h4>
      </div>
      <div class="col-12 col-lg-4 text-right mt-2 mt-lg-0">
        <h5 class="m-0">
        {% for lecturer in workshop.lecturer.all %}
          <span class="d-inline-block"> {# this makes it so that line breaks are preferred at the point of the comma, not in the middle of the name #}
            <a href="{% url 'profile' lecturer.user.id %}">{{ lecturer }}</a>{% if not forloop.last %},{% endif %}
          </span>
        {% endfor %}
        </h5>
      </div>
    </div>
  </div>
  {% endif %}
  <div class="card-body">
    <div class="row">
      <div class="col-12 col-md-6 col-lg-7">
        {% if workshop.short_description %}
          <p>{{ workshop.short_description }}</p>
        {% endif %}
        <div class="d-block d-md-none">
          {% if workshop.is_qualifying %}
            <span class="d-inline-block w-100-on-sm mb-1 mb-md-0 qualification-problems-button"
              {# this wrapper span is here to allow the tooltip to work on a disabled element, see https://getbootstrap.com/docs/4.0/components/tooltips/#disabled-elements #}
              {% if not workshop.qualification_problems %}data-toggle="tooltip" data-placement="right" title="Zadania kwalifikacyjne pojawią się wkrótce"{% endif %}>
              <a role="button"
                 class="btn btn-dark btn-sm w-100-on-sm {% if not workshop.qualification_problems %}disabled{% endif %}"
                 href="{% url 'qualification_problems' workshop.year.pk workshop.name %}" target="_blank">
                <i class="fas fa-tasks"></i> Zadania kwalifikacyjne
              </a>
            </span>

            {% if workshop.can_access_solution_upload and workshop.are_solutions_editable %}
              <span class="{% if not no_workshop_card_header %}d-none{% else %}d-block{% endif %} w-100-on-sm mb-1 mb-md-0 workshop-header-button"
                  {# this wrapper span is here to allow the tooltip to work on a disabled element, see https://getbootstrap.com/docs/4.0/components/tooltips/#disabled-elements #}
                  {% if not registered %}data-toggle="tooltip" data-placement="right" title="Przed przesłaniem rozwiązań, zapisz się na warsztaty"{% endif %}>
                <a role="button"
                   class="btn btn-primary btn-sm w-100-on-sm {% if not registered %}disabled{% endif %}"
                   href="{% url 'workshop_my_solution' workshop.year.pk workshop.name %}">
                  <i class="fas fa-paper-plane"></i> Prześlij<span class="d-none d-lg-inline"> rozwiązania</span>!
                </a>
              </span>
            {% endif %}
          {% else %}
            <em>Na te warsztaty nie ma kwalifikacji. Nie liczą się do puli wymaganych zgłoszeń.</em>
          {% endif %}
          {% if workshop.is_qualification_editable %}
            {% if registered %}
              <div onclick="handle_registration_change('{{ workshop.name }}', false);"
                   style="cursor: pointer;"
                   class="{% if not no_workshop_card_header %}d-none{% else %}d-block{% endif %} workshop-header-button">
                <button class="btn btn-warning btn-sm w-100-on-sm" type="button">
                  <i class="fas fa-minus"></i> Wypisz się
                </button>
              </div>
            {% else %}
              <div onclick="handle_registration_change('{{ workshop.name }}', true);"
                   style="cursor: pointer;"
                   class="{% if not no_workshop_card_header %}d-none{% else %}d-block{% endif %} workshop-header-button">
                <button class="btn btn-success btn-sm w-100-on-sm" type="button">
                  <i class="fas fa-plus"></i> Zapisz się
                </button>
              </div>
            {% endif %}
          {% else %}
            {% if registered %}
              <div class="{% if not no_workshop_card_header %}d-none{% else %}d-block{% endif %} workshop-header-button">
                <button class="btn btn-success btn-sm w-100-on-sm" type="button" disabled="disabled">
                  <i class="fas fa-check"></i> Byłeś zapisany
                </button>
              </div>
            {% endif %}
          {% endif %}
        </div>
      </div>
      <div class="col-12 col-md-6 col-lg-5 d-none d-md-block">
        <div class="float-right text-center">
          {% if workshop.is_qualifying %}
            {% if workshop.qualification_problems %}
              <a href="{% url 'qualification_problems' workshop.year.pk workshop.name %}"
                 class="d-inline-block mx-1 align-top"
                 style="cursor: pointer;">
                <button class="btn btn-info btn-circle mt-2" type="button" {% if not workshop.qualification_problems %}disabled{% endif %}>
                  <i class="fas fa-tasks"></i>
                </button>
                <br/>
                <h5 class="text-default mt-3 mb-0">Zadania</h5>
              </a>
            {% else %}
              <div class="d-inline-block mx-1 align-top"
                   data-toggle="tooltip"
                   data-placement="right"
                   title="Zadania kwalifikacyjne pojawią się wkrótce">
                <button class="btn btn-dark btn-circle mt-2" type="button" disabled>
                  <i class="fas fa-tasks"></i>
                </button>
                <br/>
                <h5 class="text-default mt-3 mb-0">Zadania</h5>
              </div>
            {% endif %}

            {% if workshop.can_access_solution_upload and workshop.are_solutions_editable %}
              {% if registered %}
                <a href="{% url 'workshop_my_solution' workshop.year.pk workshop.name %}"
                   class="d-inline-block mx-1 align-top"
                   style="cursor: pointer;">
                  <button class="btn btn-primary btn-circle mt-2" type="button" {% if not workshop.qualification_problems %}disabled{% endif %}>
                    <i class="fas fa-paper-plane"></i>
                  </button>
                  <br/>
                  <h6 class="text-default mt-3 mb-0">Prześlij<br/>rozwiązania</h6>
                </a>
              {% else %}
                <div class="d-inline-block mx-1 align-top"
                     data-toggle="tooltip"
                     data-placement="right"
                     title="Przed przesłaniem rozwiązań, zapisz się na warsztaty">
                  <button class="btn btn-primary btn-circle mt-2" type="button" disabled>
                    <i class="fas fa-paper-plane"></i>
                  </button>
                  <br/>
                  <h6 class="text-default mt-3 mb-0">Prześlij<br/>rozwiązania</h6>
                </div>
              {% endif %}
            {% endif %}
          {% endif %}
          {% if workshop.is_qualification_editable %}
            {% if registered %}
              <div onclick="handle_registration_change('{{ workshop.name }}', false);"
                   class="d-inline-block mx-1 align-top"
                   style="cursor: pointer;">
                <button class="btn btn-warning btn-circle mt-2" type="button">
                  <i class="fas fa-minus"></i>
                </button>
                <br/>
                <h5 class="text-default mt-3 mb-0">Wypisz się</h5>
              </div>
            {% else %}
              <div onclick="handle_registration_change('{{ workshop.name }}', true);"
                   class="d-inline-block mx-1 align-top"
                   style="cursor: pointer;">
                <button class="btn btn-success btn-circle mt-2" type="button">
                  <i class="fas fa-plus"></i>
                </button>
                <br/>
                <h5 class="text-default mt-3 mb-0">Zapisz się</h5>
              </div>
            {% endif %}
          {% else %}
            {% if registered %}
              <div class="d-inline-block mx-1 align-top">
                <button class="btn btn-success btn-circle mt-2" type="button" disabled="disabled">
                  <i class="fas fa-check"></i>
                </button>
                <br/>
                <h5 class="text-default mt-3 mb-0">Byłeś zapisany</h5>
              </div>
            {% endif %}
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>